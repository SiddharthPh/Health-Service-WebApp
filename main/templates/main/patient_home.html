{% extends 'main/base.html' %}
{% block content %}
<!-- <button type="button" class="btn btn-primary">Patients_Portal</button>
<button type="button" class="btn btn-secondary">Physicians_Portal</button>
<button type="button" class="btn btn-success">Doctor_Portal</button> -->
  <!-- Font Awesome -->
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"> -->
<!-- Google Fonts -->
<!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"> -->
<!-- Bootstrap core CSS -->
<!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet"> -->
<!-- Material Design Bootstrap -->
<!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" rel="stylesheet"> -->

<style>
  body {
  font-size: .875rem;
}

.feather {
  width: 16px;
  height: 16px;
  vertical-align: text-bottom;
}

/*
 * Sidebar
 */

.sidebar {
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  z-index: 100; /* Behind the navbar */
  padding: 48px 0 0; /* Height of navbar */
  box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
}

.sidebar-sticky {
  position: relative;
  top: 0;
  height: calc(100vh - 48px);
  padding-top: .5rem;
  overflow-x: hidden;
  overflow-y: auto; /* Scrollable contents if viewport is shorter than content. */
}

@supports ((position: -webkit-sticky) or (position: sticky)) {
  .sidebar-sticky {
    position: -webkit-sticky;
    position: sticky;
  }
}

.sidebar .nav-link {
  font-weight: 500;
  color: #333;
}

.sidebar .nav-link .feather {
  margin-right: 4px;
  color: #999;
}

.sidebar .nav-link.active {
  color: #007bff;
}

.sidebar .nav-link:hover .feather,
.sidebar .nav-link.active .feather {
  color: inherit;
}

.sidebar-heading {
  font-size: .75rem;
  text-transform: uppercase;
}

/*
 * Content
 */

[role="main"] {
  padding-top: 48px; /* Space for fixed navbar */
}

/*
 * Navbar
 */

.navbar-brand {
  padding-top: .75rem;
  padding-bottom: .75rem;
  font-size: 1rem;
  background-color: rgba(0, 0, 0, .25);
  box-shadow: inset -1px 0 0 rgba(0, 0, 0, .25);
}

.navbar .form-control {
  padding: .75rem 1rem;
  border-width: 0;
  border-radius: 0;
}

.form-control-dark {
  color: #fff;
  background-color: rgba(255, 255, 255, .1);
  border-color: rgba(255, 255, 255, .1);
}

.form-control-dark:focus {
  border-color: transparent;
  box-shadow: 0 0 0 3px rgba(255, 255, 255, .25);
}
</style>
<!-- <div class="container-fluid">
  <div class="row">
    <nav class="col-md-2 d-none d-md-block bg-light sidebar">
      <div class="sidebar-sticky">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link active" href="#">
              <span data-feather="home"></span>
              Dashboard <span class="sr-only">(current)</span>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file"></span>
              Orders
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="shopping-cart"></span>
              Products
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="users"></span>
              Customers
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="bar-chart-2"></span>
              Reports
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="layers"></span>
              Integrations
            </a>
          </li>
        </ul>

        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
          <span>Saved reports</span>
          <a class="d-flex align-items-center text-muted" href="#">
            <span data-feather="plus-circle"></span>
          </a>
        </h6>
        <ul class="nav flex-column mb-2">
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Current month
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Last quarter
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Social engagement
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Year-end sale
            </a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</div> -->

<div class="container-fluid">
  <div class="row">
    <nav class="col-md-2 d-none d-md-block bg-light sidebar">
      <div class="sidebar-sticky">
      <img src="../../../media/patient_pics/default.jpg" class="ronded-circle account-img" alt="Person" style="width:70%; margin-left: 30px;margin-top: 50px;">
      <h5 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
        <span style="text-align:center;">Name:  {{patient_name}}</span>
        <a class="d-flex align-items-center text-muted" href="#">
          <span data-feather="plus-circle"></span>
        </a>
      </h5>

        
        <ul class="nav flex-column mb-2">
          <!-- <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Current month
            </a>
          </li> -->
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Email:  {{patient_email}}
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text">City:  {{patient_address}}</span>
              
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Phone:  {{patient_phone}}
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Height:  {{patient_height}}cms
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Weight:  {{patient_weight}}kgs
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="file-text"></span>
              Gender:  {{patient_gender}}
            </a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</div>
<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4" >
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom" style="margin-top: 50px;">
    <h1 class="h2">Dashboard</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
      <div class="btn-group mr-2" style="display:flex">
        <button class="btn btn-sm btn-outline-secondary" id="Temperature" name="Temperature" onclick="temp()">Temperature</button>
        <button class="btn btn-sm btn-outline-secondary" id="bmi" name="bmi" onclick="bmi()">BMI</button>
        <button class="btn btn-sm btn-outline-secondary" id="bloodpressure" name="bloodpressure" onclick="bloodp()">BP</button>
        <button class="btn btn-sm btn-outline-secondary" id="Skin_conductance" name="Skin_conductance">Skin Conductance</button>
        <button class="btn btn-sm btn-outline-secondary" id="pulse_rate" name="pulse_rate">Pulse Rate</button>
        <button class="btn btn-sm btn-outline-secondary" id="oxygen_saturation" name="oxygen_saturation">Oxygen Saturation</button>
        <button class="btn btn-sm btn-outline-secondary" id="respiration_rate" name="respiration_rate">Respiration Rate</button>
        <button class="btn btn-sm btn-outline-secondary" id="viewmore" data-toggle="modal" data-target="#myModal_ECG" onclick="ecg()">
          <span data-feather="calendar"></span>
          ECG
        </button>       
         <button class="btn btn-sm btn-outline-secondary" id="Hb" name="Hb">Hb</button>
      </div>
      <button class="btn btn-sm btn-outline-secondary" id="viewmore" data-toggle="modal" data-target="#myModal">
        <span data-feather="calendar"></span>
        View More
      </button>
    </div>
  </div>
  <div class="modal" id="myModal">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <!-- <div class="btn-toolbar mb-2 mb-md-0">  -->
            <div class="btn-group mr-2" style="display:flex">
              <button class="btn btn-sm btn-outline-secondary" id="Temperature1" name="Temperature" onclick="temp1()">Temp</button>
              <button class="btn btn-sm btn-outline-secondary" id="bmi1" name="bmi" onclick="bmi1()">BMI</button>
              <button class="btn btn-sm btn-outline-secondary" id="bloodpressure1" name="bloodpressure" onclick="bloodp1()">BP</button>
              <button class="btn btn-sm btn-outline-secondary" id="Skin_conductance1" name="Skin_conductance">Skin Cond</button>
              <button class="btn btn-sm btn-outline-secondary" id="pulse_rate1" name="pulse_rate">Pulse Rate</button>
              <button class="btn btn-sm btn-outline-secondary" id="oxygen_saturation1" name="oxygen_saturation">O2 Sat</button>
              <button class="btn btn-sm btn-outline-secondary" id="respiration_rate1" name="respiration_rate">RR</button>
              <button class="btn btn-sm btn-outline-secondary" id="ECG1" name="ECG">ECG</button>
              <button class="btn btn-sm btn-outline-secondary" id="Hb1" name="Hb">Hb</button>
              </div>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
          <canvas class="my-4 w-100" id="myChart1" width="90%" height="10%"></canvas>
        </div>
        
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
        
      </div>
    </div>
  </div>

  <div class="modal" id="myModal_ECG">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <!-- <div class="btn-toolbar mb-2 mb-md-0">  -->
            <!-- <div class="btn-group mr-2" style="display:flex">
              <button class="btn btn-sm btn-outline-secondary" id="Temperature1" name="Temperature" onclick="temp1()">Temp</button>
              <button class="btn btn-sm btn-outline-secondary" id="bmi1" name="bmi" onclick="bmi1()">BMI</button>
              <button class="btn btn-sm btn-outline-secondary" id="bloodpressure1" name="bloodpressure" onclick="bloodp1()">BP</button>
              <button class="btn btn-sm btn-outline-secondary" id="Skin_conductance1" name="Skin_conductance">Skin Cond</button>
              <button class="btn btn-sm btn-outline-secondary" id="pulse_rate1" name="pulse_rate">Pulse Rate</button>
              <button class="btn btn-sm btn-outline-secondary" id="oxygen_saturation1" name="oxygen_saturation">O2 Sat</button>
              <button class="btn btn-sm btn-outline-secondary" id="respiration_rate1" name="respiration_rate">RR</button>
              <button class="btn btn-sm btn-outline-secondary" id="ECG1" name="ECG">ECG</button>
              <button class="btn btn-sm btn-outline-secondary" id="Hb1" name="Hb">Hb</button>
              </div> -->
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
          <canvas id="myChart_1" width="20%" height="10%"></canvas>
          <canvas id="myChart_2" width="30%" height="10%"></canvas>
          <canvas id="myChart_3" width="30%" height="10%"></canvas>

        </div>
        
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
        
      </div>
    </div>
  </div>
  <canvas class="my-4 w-100" id="myChart" width="90%" height="25%"></canvas>
  
  <!-- Layout -->
  <!-- <div class="container">
    <h4 style="font-weight: 600;margin: 3rem 0rem;">Office Bearers</h4>
    <div class="row">
      <div class="col s12 m6 l4">
        <div class="card hoverable office">
          <div class="card-image" >
            <img src="images/pramodh.jpeg">
            <span class="card-title" style="font-weight: 500;">Sri Pramodh</span>
          </div>
          <div class="card-content">
            <p><b style="font-size: 1.2rem;">Vice President (UG)</b><br>PhD student, Dept. of CS <br>Stony Brook University, NY</p>
          </div>          
        </div>
      </div>
      <div class="col s12 m6 l4">
        <div class="card hoverable office">
          <div class="card-image" >
            <img src="images/govind.jpg">
            <span class="card-title" style="font-weight: 500;">Govind Kumar</span>
          </div>
          <div class="card-content">
            <p><b style="font-size: 1.2rem;">President</b><br>Software Engineer <br>Cunomial, Bangalore</p>
          </div>          
        </div>
      </div>
      <div class="col s12 m6 l4">
        <div class="card hoverable office">
          <div class="card-image" >
            <img src="images/pramodh.jpeg">
            <span class="card-title" style="font-weight: 500;">Sri Pramodh</span>
          </div>
          <div class="card-content">
            <p><b style="font-size: 1.2rem;">Vice President (UG)</b> <br>PhD student, Dept. of CS <br>Stony Brook University, NY</p>
          </div>          
        </div>
      </div>
      <div class="col s12 m6 l4">
        <div class="card hoverable office">
          <div class="card-image" >
            <img src="images/shubham.jpeg">
            <span class="card-title" style="font-weight: 500;">Shubham Giri</span>
          </div>
          <div class="card-content">
            <p><b style="font-size: 1.2rem;">Executive Member - PG</b><br>PhD student, Dept. of ME <br>IIT Bombay, India</p>
          </div>          
        </div>
      </div>
      <div class="col s12 m6 l4">
        <div class="card hoverable office">
          <div class="card-image" >
            <img src="images/Suyash.JPG"> <span class="card-title" style="font-weight: 500;">Dr. Suyash Kandele</span>
          </div>
          <div class="card-content">
            <p><b style="font-size: 1.2rem;">Vice President PG</b> <br> Research Engineer <br>Redpine Signals, Hyderabad</p>
          </div>          
        </div>
      </div>
      <div class="col s12 m6 l4">
        <div class="card hoverable office">
          <div class="card-image" >
            <img src="images/govind.jpg">
            <span class="card-title" style="font-weight: 500;">Govind Kumar</span>
          </div>
          <div class="card-content">
            <p><span style="font-size: 1.2rem;font-weight: 700;text-align: center;margin:0rem auto;">President</span><br>Software Engineer <br>Cunomial, Bangalore</p>
          </div>          
        </div>
      </div>
    </div>
  </div>
   -->

</div>
<div class="row">
  <div class="col-md-6 order-md-1" style="margin-bottom: 100px;margin-top: 50px;">
    <div class="card">
  <h5 class="card-header">Appointment Form</h5>
  <div class="card-body">
  <form class="needs-validation" novalidate action="{% url 'appointment' %}" method="POST" >
    {% csrf_token %}
    <div class="row">
      <div class="col-md-5 mb-1">
        <label for="firstName">Full name</label>
        <input type="text" class="form-control" id="fullName" name="fullName" placeholder="" value="" required>
        <div class="invalid-feedback">
          Valid full name is required.
        </div>
      </div>
    </div>

    <div class="mb-3">
      <label for="username">Email</label>
      <div class="input-group">
        <div class="input-group-prepend">
          <span class="input-group-text">@</span>
        </div>
        <input type="text" class="form-control" id="username" name="email" placeholder="Username" required>
        <div class="invalid-feedback" style="width: 100%;">
          Your username is required.
        </div>
      </div>
      
    </div>
    <div class="form-group">
      <label for="inputState">Schedule Time</label>
      <select id="schedule" name="schedule_time" class="form-control" required>
        <option selected>9AM-10AM</option>
        <option selected>11AM-12PM</option>
        <option selected>1PM-2PM</option>
        <option selected>3PM-4PM</option>
      </select>
    </div>
    <div class="form-group">
      <label for="scheduledate">Date:</label>
      <input type="date" id="date" name="schedule_date">
    </div>

    <div class="form-group">
      <label for="inputState">Doctors</label>
      <select id="doctors" name="doctors" class="form-control" required>
        {% for doctor in doctors %}
        <option value="{{ doctor.email }}">{{ doctor.name }}[{{doctor.profession}}]({{doctor.email}})</option>
        {% endfor %}
      </select>
    </div>
    <div class="form-group">
      <label for="Message">Message:</label>
      <textarea class="form-control" id="exampleFormControlTextarea1" name="message" rows="3"></textarea>
    </div>
    

    <hr class="mb-4">
    <button class="btn btn-primary btn-lg btn-block" type="submit">Continue to Review</button>
  </form>
  </div>
  </div>
</div>
  <div class="col-md-6 order-md-2" style="margin-bottom: 100px;margin-top: 50px;">
    <div class="card">
      <h5 class="card-header">Medical History</h5>
      {% if medical_history_obj %}
      <div class="card-body">
        <div class="row">
          <div class="col-md-5 mb-1">
            <input type="hidden" name="patient_email" value={{patient_email}}>

            <label for="drug_allergies">Drug Allergies</label>
            <textarea class="form-control" id="drugallergies" name="drugallergies" rows="3">{{medical_history_obj.drugallergies}}</textarea>
          </div>
    
          <div class="col-md-5 mb-1">
            <label for="drug_allergies">All Illness</label>
            <textarea class="form-control" id="allillness" name="allillness" rows="3">{{medical_history_obj.all_illness}}</textarea>
          </div>
          <div class="col-md-5 mb-1">
            <label for="drug_allergies">All Operations</label>
            <textarea class="form-control" id="alloperations" name="alloperations" rows="3">{{medical_history_obj.all_operations}}</textarea>
          </div>
          <div class="col-md-5 mb-1">
            <label for="drug_allergies">Current Medication</label>
            <textarea class="form-control" id="current_medication" name="current_medication" rows="3">{{medical_history_obj.current_medication}}</textarea>
          </div>        
        </div>
      </div>
      {% else %}
      <div class="card-body">
        <form class="needs-validation" novalidate action="{% url 'medical_history_check' %}" method="POST" >
          {% csrf_token %}
          <div class="row">
              <input type="hidden" name="patient_email" value={{patient_email}}>
              <div class="col-md-5 mb-1">
              <label for="drug_allergies">Drug Allergies</label>
              <textarea class="form-control" id="drugallergies" name="drugallergies" rows="3"></textarea>
            </div>
      
            <div class="col-md-5 mb-1">
              <label for="drug_allergies">All Illness</label>
              <textarea class="form-control" id="allillness" name="allillness" rows="3"></textarea>
            </div>
            <div class="col-md-5 mb-1">
              <label for="drug_allergies">All Operations</label>
              <textarea class="form-control" id="alloperations" name="alloperations" rows="3"></textarea>
            </div>
            <div class="col-md-5 mb-1">
              <label for="drug_allergies">Current Medication</label>
              <textarea class="form-control" id="current_medication" name="current_medication" rows="3"></textarea>
            </div>
            <button class="btn btn-primary btn-lg btn-block" type="submit">Submit</button>

        </form>
        
      </div>
        {% endif %}
      </div>
  </div>
</div>
 
  </main>
  <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" crossorigin="anonymous"></script>
  <script src="../../static/main/js/dashboard.js"></script>
  <!-- <script>
    $(document).ready(function(){
      $("#viewmore").click(function(){
        $("#myModal").modal();
      });
    });
    </script> -->
  



{% endblock %}